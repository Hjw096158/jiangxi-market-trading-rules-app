# 江西电力市场规则闯关游戏 - 完整关卡规划

## 一、项目概述

### 1.1 应用定位

**应用名称**：江西电力市场规则学习闯关系统

**目标用户**：

- 电力市场新入职员工（发电企业、售电公司、交易中心）

- 电力专业在校学生

- 电力市场研究人员

- 对电力交易感兴趣的从业者

**学习目标**：

- 系统掌握江西电力市场交易规则（4.0版）

- 理解市场注册、中长期交易、价格机制等核心概念

- 通过实战模拟培养交易决策能力

- 熟悉边际电价法、滚动撮合等关键交易方式

- 具备独立参与电力市场交易的基础能力

### 1.2 设计理念

**游戏化学习**：

- 将枯燥的规则条文转化为闯关游戏

- 循序渐进的难度曲线，从基础到实战

- 即时反馈，答对有奖励，答错有提示

**高趣味性**：

- 减少传统题目占比（30%），增加交互式模拟器（70%）

- 丰富的动画效果和视觉反馈

- 成就系统、排行榜激发竞争意识

- 剧情化场景设计，代入感强

**实战导向**：

- 基于真实规则文档设计内容

- 模拟器贴近真实交易环境

- 综合实战关卡培养决策能力

- 提供历史数据和典型案例

### 1.3 技术实现方案

**开发平台**：Web应用（H5），支持PC和移动端

**技术栈建议**：

- **前端框架**：React 18 + TypeScript

- **状态管理**：Zustand（轻量级）

- **UI库**：Tailwind CSS + Headless UI

- **图表库**：Recharts（供需曲线可视化）

- **动画库**：Framer Motion

- **数据存储**：LocalStorage（进度保存）+ IndexedDB（题库）

- **部署**：Vercel / GitHub Pages

**项目结构**：

```plaintext
/src
  /components      # 通用组件
    Button, Modal, ProgressBar...
  /simulators      # 模拟器组件
    TradingSimulator, CalculatorSimulator...
  /levels          # 关卡数据
    level1.json, level2.json...
  /store           # 状态管理
    userStore, progressStore...
  /utils           # 工具函数
    scoringLogic, dataGeneration...
```

---

## 二、核心概念词汇表

本章节系统梳理电力市场核心术语，为后续关卡学习和模拟器开发提供统一的定义标准。

| 术语分类 | 术语名称 | 定义 | 对应规则条款 | 应用场景 | 关键公式/说明 |
| --- | --- | --- | --- | --- | --- |
| **市场准入类** | 经营主体 | 指按规则注册，参与电力市场交易的发电企业、售电公司、电力用户、新型经营主体。 | 第五条 | 第1关：市场准入篇 | - |
|  | 市场注册 | 经营主体按规定条件和流程，在电力交易机构申请成为市场成员的过程。 | 第十五条 | 1-3 注册流程实操模拟器 | 流程：申请→承诺→审查→公示→生效 |
| **交易方式类** | 双边协商交易 | 购售双方自行协商交易电量、电价等要素，达成一致后由一方发起要约，另一方接受。 | 第二十条 | 3-1 双边协商谈判模拟器 | - |
|  | 边际电价法 | 一种集中竞价出清方式，所有成交的购售双方均以统一的边际出清价格结算。 | 第二十一条 | 3-2 供需曲线可视化模拟器 | 边际价格P₀为购售双方申报曲线的交点价格。 |
|  | 报价撮合法 | 一种集中竞价出清方式，按“价格优先”原则对购售双方申报进行配对，成交价格与双方报价相关。 | 第二十一条 | 3-3 报价撮合出清模拟器 | `P_成交 = P_售 + (1-k)×(P_购 - P_售)` |
|  | 滚动撮合 | 一种实时交易方式，按“时间优先、价格优先”原则，只要购方报价≥售方报价即时成交。 | 第二十四条 | 3-6 滚动撮合交易模拟器 | 成交价为先挂牌方的价格。 |
| **价格与电量类** | 48时段 | 将一天24小时划分为48个半小时的交易时段，是中长期交易的标的物。 | 第十四条 | 第4关：价格与电量约束篇 | - |
|  | 年度电量约束 | 燃煤、新能源等发电企业年度可参与市场交易的净合同电量上限。 | 第三十七至三十八条 | 4-3 年度电量约束计算器 | 燃煤机组上限 = 可用发电能力×(1-厂用电率)×K₁ |
| **结算类** | 偏差电量 | 经营主体在实际运行中产生的电量与其合同电量之间的差值。 | 结算章节 | 6-2 偏差电费计算器 | `偏差电量 = 实际电量 - 合同电量` |
|  | 偏差电费 | 因产生偏差电量而发生的费用结算，通常按现货市场价格或约定价格计算。 | 结算章节 | 6-2 偏差电费计算器 | `偏差电费 = 偏差电量 × 偏差结算价格` |
| **绿电类** | 绿色电力环境价值 | 绿色电力在生产过程中对环境产生的正面效益的量化价值，与电能量一同交易。 | 绿电章节 | 5-1 绿电交易特点 | - |
|  | 绿证 | 绿色电力环境价值的电子凭证，是认定绿色电力消费的唯一证明。 | 绿电章节 | 5-3 绿证核发与认领 | 1个绿证单位 = 1MWh 绿色电力 |

---

## 三、概念图与架构设计

### 3.1 整体架构图

- **结构**: 采用分层递进的图结构。

- **顶层**: "江西电力市场规则学习闯关系统"。

- **第二层**: 七大关卡模块，从左到右依次排列（1.准入 → 2.基础 → 3.交易方式 → 4.约束 → 5.绿电 → 6.结算 → 7.实战）。

- **第三层 (知识点)**: 每个关卡下方连接其核心知识点。例如，"第3关"连接"双边协商"、"边际电价法"、"滚动撮合"等。

- **第四层 (模拟器)**: 知识点下方连接对应的模拟器。例如，"边际电价法"连接"供需曲线可视化模拟器"。

- **依赖关系**: 使用箭头表示前置依赖。例如，从"第2关"指向"第3关"，表示学习完基础才能进入交易方式。

### 3.2 交易流程概念图

- **市场注册流程图**: `开始 -> 提交申请材料 -> 交易机构审查(5个工作日) -> [条件判断: 是否售电公司?] -> 是: 公示(10个工作日) -> 否: 直接进入下一步 -> [条件判断: 是否有异议?] -> 是: 异议处理 -> 否: 注册生效 -> 结束`

- **交易时间轴**: `横向时间轴 -> [年度] 双边协商 -> [月度] 集中竞价/双边协商/挂牌 -> [月内] 滚动撮合 -> [D-2日] 融合交易 -> [D-1日] 现货市场 -> [D日] 实时运行`

- **集中竞价(边际电价法)出清流程**: `开始 -> 售方报价(价格从低到高排序) -> 购方报价(价格从高到低排序) -> 生成供需曲线 -> 计算曲线交点(边际价格P₀, 预出清电量Q₀) -> [条件判断: 售方报价≤P₀?] -> 是: 成交 -> 否: 未成交 -> [条件判断: 购方报价≥P₀?] -> 是: 成交 -> 否: 未成交 -> 结束`

### 3.3 数据模型设计

- **用户进度 (userProgress.json)**

  - `userId`: String

  - `currentLevel`: Number

  - `unlockedLevels`: Array

  - `levelScores`: `{ "level_1": { "score": Number, "stars": Number }, ... }`

  - `achievements`: Array

- **题库 (questions.json)**

  - `id`: String (e.g., "L1-1-SC-001")

  - `level`: Number

  - `subLevel`: Number

  - `type`: String ("single_choice", "multiple_choice", "true_false", "case_study")

  - `stem`: String

  - `options`: Array

  - `answer`: Array | String

  - `explanation`: String

- **模拟器状态 (simulatorState.json)**

  - `simulatorId`: String

  - `lastState`: Object (e.g., bids, asks, market price)

  - `highScore`: Number

### 3.4 模拟器架构图

- **分类**:

  - **计算器类**: 年度电量约束计算器, 偏差电费计算器

  - **流程模拟类**: 注册流程闯关器, 结算单解读模拟器

  - **交易大厅类**: 双边协商, 集中竞价, 挂牌, 撮合, 滚动撮合

  - **经营策略类**: 发电企业经营模拟, 售电公司套利模拟, 用户购电优化

- **核心组件复用**:

  - **报价面板 (BiddingPanel)**: 用于所有交易模拟器的报价输入。

  - **市场深度图 (MarketDepthChart)**: 用于滚动撮合、集中撮合。

  - **供需曲线图 (SupplyDemandCurve)**: 用于边际电价法模拟器。

  - **结果报告 (ResultReport)**: 用于所有模拟器结束时显示收益、成交量等。

---

## 四、结算计算深度解析

### 4.1 边际电价法出清计算

- **供需曲线构建**:

  - **售方**: 将所有售方申报按价格从低到高排序，电量累加，形成阶梯上升曲线。

  - **购方**: 将所有购方申报按价格从高到低排序，电量累加，形成阶梯下降曲线。

- **交点计算**:

  - 寻找售方累计电量 `Qs(P)` 与购方累计电量 `Qd(P)` 的交点。

  - 边际价格 `P₀` 是最后一个使得 `Qd(P) >= Qs(P)` 的价格点。

  - **边界情况**: 若购方最低价 > 售方最高价，曲线不相交。按规则第二十一条， `P₀ = P_Dmin - K × (P_Dmin - P_Smax)`，其中 `K=0.5`。

- **伪代码示例**:

  ```python
  def calculate_marginal_price(bids, asks):
    # bids: [{price, quantity}], asks: [{price, quantity}]
    # Sort asks by price asc, bids by price desc
    sorted_asks = sorted(asks, key=lambda x: x['price'])
    sorted_bids = sorted(bids, key=lambda x: x['price'], reverse=True)
    
    # Create cumulative curves (not shown for brevity)
    
    # Find intersection
    # ... logic to find P0 and Q0 ...
    
    return marginal_price, clearing_quantity
  ```

### 4.2 报价撮合法出清计算

- **k系数**: `k`为价差对系数，暂按0.5执行，表示购售双方平分价差收益。

- **成交价格公式**:

  - 购方成交价: `P_buy_final = P_buy_bid - k * (P_buy_bid - P_sell_ask)`

  - 售方成交价: `P_sell_final = P_sell_ask + (1 - k) * (P_buy_bid - P_sell_ask)`

  - 当 `k=0.5` 时，`P_buy_final = P_sell_final`。

- **算法**:

  1. 售方申报按价格从低到高排序，购方申报按价格从高到低排序。

  2. 取出第一个售方申报(价最低)和第一个购方申报(价最高)。

  3. 如果 `P_buy_bid >= P_sell_ask`，则可以成交。

  4. 成交电量取双方申报电量的较小值。

  5. 计算成交价格。

  6. 更新电量全部成交一方的指针，进入下一轮撮合，直至 `P_buy_bid < P_sell_ask`。

### 4.3 偏差电量与偏差电费计算

- **公式**:

  - `偏差电量 (MWh) = 实际用/发电量 - 合同总电量`

  - `偏差电费 (元) = 偏差电量 × 偏差结算价格` (通常为现货市场价格)

- **正负偏差**:

  - **发电企业**: 正偏差(多发)按现货价获得收入；负偏差(少发)按现货价支付罚金。

  - **电力用户**: 正偏差(多用)按现货价购买电量；负偏差(少用)按现货价售出电量。

### 4.4 综合电费计算公式

- **用户侧总电费**: `总电费 = 电能量费用 + 输配电费 + 政府性基金及附加 + 辅助服务分摊费用 ± 偏差电费`

- **发电侧总收入**: `总收入 = 合同电费收入 ± 偏差电费收入 - 辅助服务分摊费用`

### 4.5 年度电量约束计算

- **燃煤机组公式**: `年度净合同上限 = (机组容量 × 年可用小时数) × (1 - 厂用电率) × K₁`

- **新能源机组公式**: `年度净合同上限 = 额定装机容量 × (1 - 机制电量比例) × 同类型机组最大发电可利用小时数`

---

## 五、真实结算单解读模块设计

### 5.1 结算单模板设计

- **发电企业月度结算单模板**:

  - 基本信息: 企业名称, 结算月份, 机组单元

  - 电能量结算: 合同电量/电价/电费, 偏差电量/价格/电费, 总电能量收入

  - 辅助服务费用: 调频/备用等分摊费用

  - 最终应收金额

- **售电公司月度结算单模板**:

  - 批发侧结算: 购电合同电量/电费, 偏差电量/电费, 辅助服务分摊

  - 零售侧结算: 对代理用户的总售电量/电费

  - 输配电费

  - 净收益/亏损

- **电力用户月度结算单模板**:

  - 基本信息: 用户名称, 电压等级, 结算月份

  - 电能量费用: 从售电公司/批发市场购电的电量/电价/电费

  - 输配电费: 按电压等级和用电量计算

  - 政府性基金及附加

  - 偏差电费

  - 最终应付金额

### 5.2 结算单解读模拟器

- **交互设计**:

  1. 系统展示一张预设的、包含各项数据的结算单。

  2. 关键数据项（如“偏差电量”、“输配电费”）带有高亮或问号图标。

  3. 用户点击高亮项，弹出窗口显示该项的定义、计算公式和数据来源。

- **找错模式**:

  - 结算单中预设1-3个逻辑或计算错误（如偏差电费计算错误）。

  - 用户需要找出所有错误并提交。

- **自主计算模式**:

  - 系统提供合同电量、实际电量、市场价格等原始数据。

  - 用户需在空白的结算单模板中填入计算结果。

  - 提交后系统自动批改并给出评分。

### 5.3 典型案例库

- **案例1：正常月份结算**: 基准案例，偏差率低，各项费用正常。

- **案例2：发电企业正偏差盈利**: 某月现货价格高于合同价，发电企业超发，获得额外盈利。

- **案例3：售电公司负偏差亏损**: 售电公司预测用户用电量偏低，导致在昂贵的现货市场补购电量，造成亏损。

- **案例4：用户侧峰谷套利**: 用户通过调整生产计划，在谷段多用电，峰段少用电，总电费降低。

- **案例5：绿电交易结算**: 含有“绿色电力环境价值”费用的结算单，解释电能量价格与环境价值价格的分开结算。

---

## 六、关卡体系总览

| 关卡编号 | 关卡名称 | 学习目标 | 预估时长 | 难度等级 | 小节数 | 题目数 | 模拟器数 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 第1关 | 市场准入篇 | 掌握市场注册流程与经营主体分类 | 30分钟 | ⭐ 入门 | 4 | 25 | 2 |
| 第2关 | 中长期交易基础篇 | 理解交易品种、市场成员权责、合同要素 | 40分钟 | ⭐⭐ 基础 | 4 | 30 | 1 |
| 第3关 | 交易方式篇 | 精通6种交易方式的规则与操作 | 90分钟 | ⭐⭐⭐ 进阶 | 6 | 20 | 6 |
| 第4关 | 价格与电量约束篇 | 掌握时段划分、价格限制、电量计算 | 50分钟 | ⭐⭐⭐ 进阶 | 4 | 25 | 3 |
| 第5关 | 绿色电力交易篇 | 了解绿电交易机制与绿证管理 | 35分钟 | ⭐⭐ 基础 | 3 | 20 | 1 |
| 第6关 | 结算与偏差处理篇 | 熟悉电费结算流程与偏差处理规则 | 45分钟 | ⭐⭐⭐ 进阶 | 3 | 25 | 2 |
| 第7关 | 综合实战篇 | 综合应用所学知识完成复杂交易场景 | 120分钟 | ⭐⭐⭐⭐ 专家 | 4 | 0 | 4 |

**总计**：7大关卡，28个小节，145道题目，19个模拟器

---

## 七、详细关卡设计

### 第1关：市场准入篇

**关卡概述**：本关引导学员认识电力市场的"入场券"——市场注册制度，了解不同经营主体的分类、准入条件及注册流程。

---

#### 1-1 经营主体类型识别

**学习目标**：

- 准确区分发电企业、售电公司、电力用户、新型经营主体

- 理解各类主体的定义与特征

**知识点**（基于规则文档）：

- 第五条：经营主体定义与分类

- 第六条：发电企业基本条件

- 第七条：电力用户基本条件

- 第八条：售电公司管理

- 第九至十三条：分布式电源、新型储能、虚拟电厂等新型主体

**题型设计**：

- 单选题 5题 → [题库ID: L1-1-SC-001 ~ 005]

- 拖拽匹配题 1题 → [题库ID: L1-1-MATCH-001]

**模拟器：主体身份识别器**

**交互设计**：

- **界面布局**：左侧为滚动的企业案例卡片池（20张），右侧为5个经营主体类型的投放区

- **操作方式**：拖拽卡片到对应类型框，正确时卡片飞入并显示✅，错误时弹回并显示❌，给出提示

- **进阶玩法**：限时模式（60秒内完成10张卡片），连续正确有加分

- **视觉效果**：卡片使用不同颜色代表不同主体，拖拽时有光晕效果，投放成功有粒子动画

**通关标准**：

- 题目答对率 ≥ 80%（6/7题）

- 模拟器完成至少10次正确匹配

- 解锁下一小节

---

#### 1-2 注册条件判断

**学习目标**：

- 掌握各类经营主体的具体准入条件

- 判断企业是否满足市场注册要求

**知识点**：

- 第六条：发电企业基本条件（核准/备案文件、电力业务许可证、并网调度协议、计量能力）

- 第七条：电力用户基本条件（工商业用户全部参与原则、计量能力）

- 第十条：新型储能企业基本条件（并网协议、计量条件、技术参数）

- 第十一条：虚拟电厂基本条件（聚合能力、控制能力、软硬件系统）

**题型设计**：

- 判断题 10题 → [题库ID: L1-2-TF-001 ~ 010]

- 多选题 5题 → [题库ID: L1-2-MC-001 ~ 005]

- 案例分析题 3题 → [题库ID: L1-2-CASE-001 ~ 003]

**通关标准**：

- 判断题答对 ≥ 8题

- 多选题答对 ≥ 4题

- 案例分析题答对 ≥ 2题

- 总分 ≥ 75分

---

#### 1-3 注册流程实操

**学习目标**：

- 熟悉市场注册的完整流程

- 掌握申请、承诺、审查、公示、生效各环节要求

**知识点**：

- 第十五条：注册流程（申请→承诺→审查→公示→生效）

- 第十六至十七条：材料真实性要求、5个工作日审查期限

- 第十九条：数字证书办理

**模拟器：注册流程闯关器**

**交互设计**：

**关卡式流程**：

- **关卡1：准备材料**

  - 任务：从20份文件中选出正确的注册材料

  - 正确材料：营业执照、核准文件、并网协议、许可证等

  - 干扰项：财务报表、员工花名册、设备清单等

  - 反馈：选错时提示"此材料非必需"

- **关卡2：填写信息**

  - 模拟注册表单界面

  - 必填项：企业名称、统一社会信用代码、法人、联系方式、注册容量等

  - 陷阱：企业名称必须与营业执照完全一致，注册容量应与核准文件匹配

  - 反馈：填写错误时高亮错误字段并提示

- **关卡3：签署承诺**

  - 显示《电力市场化交易风险告知书》等文件

  - 需完整阅读（计时30秒，快进到结尾不行）

  - 勾选"我已阅读并同意"

- **关卡4：等待审查**

  - 模拟5个工作日的等待（加速为5秒）

  - 显示审查进度条：材料完整性检查→合规性审查→一致性审查

  - 可能结果：审查通过 / 材料不符要求需补充

- **关卡5：公示环节**

  - 显示公示公告（售电公司10个工作日，其他主体免公示）

  - 模拟异议处理场景

- **关卡6：注册生效**

  - 显示"市场准入证"，解锁成就"市场新人"

**游戏化元素**：

- 每关限时，超时扣分

- 一次性通过全关卡奖励"速通达人"徽章

- 失败次数影响最终评分

**通关标准**：

- 完成全部6个关卡

- 总耗时 < 5分钟

- 错误次数 < 3次

---

#### 1-4 信息变更与注销

**学习目标**：

- 了解信息变更的触发条件与流程

- 掌握市场注销的正当理由与程序

**知识点**：

- 第二十八至三十九条：信息变更（5个工作日内申请，审查流程）

- 第三十一条：信息变更内容（法人更换、股权变化、机组转让等）

- 第四十至四十九条：市场注销（申请注销、自动注销）

**题型设计**：

- 单选题 5题 → [题库ID: L1-4-SC-001 ~ 005]

- 场景模拟题 3题 → [题库ID: L1-4-CASE-001 ~ 003]

**通关标准**：

- 题目答对率 ≥ 75%

- 场景模拟题全对

- 完成本关后解锁"市场准入专家"称号

---

### 第2关：中长期交易基础篇

**关卡概述**：掌握中长期交易的基本概念、交易品种、市场成员职责及合同要素，为后续交易操作打下理论基础。

---

#### 2-1 交易品种与周期

**学习目标**：

- 区分电能量交易、合同交易、绿色电力交易

- 理解年度、月度、"D-2"日等交易周期

**知识点**：

- 第十三至十八条：交易品种（电能量交易、合同交易、绿电交易）

- 第十六条：年度交易（增量交易）、月度交易（增量+融合）、"D-2"日交易（融合交易）

- 第十七条：融合交易定义（增量+转让+回购）

**题型设计**：

- 单选题 8题 → [题库ID: L2-1-SC-001 ~ 008]

- 时间轴排序题 1题 → [题库ID: L2-1-ORDER-001]

- 填空题 3题 → [题库ID: L2-1-FB-001 ~ 003]

**通关标准**：答对率 ≥ 80%

---

#### 2-2 市场成员权利义务

**学习目标**：

- 理解发电企业、用户、售电公司、电网企业、交易机构的权利义务

- 掌握各主体在交易中的职责边界

**知识点**：

- 第六至十二条：各类经营主体权利义务

- 第十条：电网企业职责（输配电服务、代理购电、居民农业保供）

- 第十一至十二条：交易机构、调度机构职责

**题型设计**：

- 多选题 8题 → [题库ID: L2-2-MC-001 ~ 008]

- 匹配题 1题 → [题库ID: L2-2-MATCH-001]

**通关标准**：答对率 ≥ 75%

---

#### 2-3 交易单元理解

**学习目标**：

- 理解交易单元与经营主体的关系

- 掌握不同交易类型的购方单元和售方单元

**知识点**：

- 第二十五条：交易单元定义（参与交易的基本单位，分购方和售方）

- 第二十六条：不同交易类型的交易单元配对

**题型设计**：

- 表格填空题 1题 → [题库ID: L2-3-FB-001]

**模拟器：交易单元配对游戏**

**玩法**：

- 屏幕分为左右两侧，左侧为购方单元池，右侧为售方单元池

- 中间显示交易类型（如"月度集中竞价"）

- 玩家需从两侧拖拽正确的单元到中央配对区

- 配对正确后显示绿色✓，错误显示红色✗并提示

- 连续配对5组正确解锁"配对大师"徽章

**通关标准**：

- 填空题全对

- 模拟器完成10组配对，准确率 ≥ 80%

---

#### 2-4 合同要素掌握

**学习目标**：

- 掌握中长期交易合同的关键要素

- 理解结算参考点、曲线形成方式、交易最小单位

**知识点**：

- 第二十七至三十条：最小合同周期（1个时段）、最小电量单位（0.001MWh）、最小价格单位（0.001元/MWh）

- 第二十八条：结算参考点（任一节点或统一结算点，默认统一结算点）

- 第三十条：曲线形成方式（协商分解、日历天数平均等）

**题型设计**：

- 单选题 5题 → [题库ID: L2-4-SC-001 ~ 005]

- 计算题 2题 → [题库ID: L2-4-CALC-001 ~ 002]

**通关标准**：答对率 ≥ 80%

---

### 第3关：交易方式篇

**关卡概述**：本关是核心重点关卡，通过6个小节深入学习双边协商、集中竞价、挂牌、撮合等交易方式，配套6个互动模拟器进行实战演练。

---

#### 3-1 双边协商交易

**学习目标**：

- 理解双边协商的交易流程

- 掌握要约与承诺机制

**知识点**：

- 第二十条：双边协商交易定义（购售双方协商一致，一方提出要约，另一方接受）

**模拟器：双边协商谈判模拟器**

**玩法说明**：

**场景设定**：

- 玩家角色：300MW燃煤电厂交易经理

- AI对手：某售电公司采购经理

- 谈判目标：达成1000 MWh的月度电能量合同

**交互界面**：

```plaintext
┌────────────────────────────────────────┐
│  谈判桌                                 │
│                                        │
│  🏭 你（发电企业）      🏢 售电公司A    │
│                                        │
│  期望价格：≥ 0.36元/kWh                │
│  期望电量：1000 MWh                    │
│  底线价格：0.34元/kWh                  │
│                                        │
│  对方报价：0.35元/kWh 800 MWh         │
│                                        │
│  [接受] [还价] [拒绝]                  │
│                                        │
│  还价策略：                             │
│  价格：[_____] 元/kWh                  │
│  电量：[_____] MWh                     │
│  [提交还价]                            │
│                                        │
│  💡提示：对方偏好稳定供应，适当降价    │
│  更容易成交！                           │
└────────────────────────────────────────┘
```

**AI行为逻辑**：

- 初始报价低于玩家期望价格10%

- 根据市场行情（当前卖盘均价）调整报价

- 谈判轮次限制：最多5轮，超过5轮视为谈判破裂

- 玩家让步越多，AI也会适当让步

**评分标准**：

- 成交价格 ≥ 底线价格：+50分

- 成交价格 ≥ 期望价格：额外+30分

- 3轮内成交：+20分

- 谈判破裂：0分

**通关标准**：

- 成功达成至少1笔交易

- 总分 ≥ 60分

---

#### 3-2 集中竞价（边际电价法）

**学习目标**：

- 掌握边际电价法的出清原理

- 理解供需曲线的形成与交点计算

- 熟练运用边际电价法公式

**知识点**：

- 第二十一条（一）边际电价法详细规则

- 公式1：购方申报曲线与售方申报曲线交叉点 = 边际出清价格

- 公式2：当购方报价始终大于售方报价时，边际出清价格 = PDmin - K×(PDmin - PSmax)

- 公式3：K系数（差值系数）暂按0.5执行

**前置知识讲解**（动画演示）：

**步骤1：理解供需曲线**

- 售方曲线：价格从低到高排序，累加形成阶梯状上升曲线

- 购方曲线：价格从高到低排序，累加形成阶梯状下降曲线

**步骤2：寻找交点**

- 两条曲线相交的点，对应的价格即为边际出清价格

- 交点对应的电量为预出清电量

**步骤3：成交规则**

- 售方报价 ≤ 边际出清价格 → 全部成交

- 购方报价 ≥ 边际出清价格 → 全部成交

- 边际价格处的申报电量如有差异，取较小值，等比例成交

**模拟器：供需曲线可视化模拟器**

**界面设计**：

```plaintext
┌──────────────────────────────────────────┐
│  边际电价法竞价模拟器                      │
├──────────────────────────────────────────┤
│  角色选择：[ 售方 ] [ 购方 ]              │
├──────────────────────────────────────────┤
│  【售方报价区】                            │
│  价格段1：[0.30] 元/kWh  电量：[200] MWh │
│  价格段2：[0.33] 元/kWh  电量：[150] MWh │
│  价格段3：[0.36] 元/kWh  电量：[100] MWh │
│  [+添加价格段]                             │
├──────────────────────────────────────────┤
│  【购方报价区】（由AI或其他玩家填写）        │
│  价格段1：0.38元/kWh  电量：180MWh        │
│  价格段2：0.35元/kWh  电量：200MWh        │
│  ...                                     │
├──────────────────────────────────────────┤
│  [开始出清]                                │
├──────────────────────────────────────────┤
│  【出清结果可视化】                         │
│  价格↑                                    │
│  0.40│    购方曲线                         │
│      │   ╱                               │
│  0.35│  ╱  ✖ ← 交点 P0 = 0.355元         │
│      │ ╱  ╱                              │
│  0.30│╱  ╱ 售方曲线                       │
│      │  ╱                                │
│  0.25│ ╱                                 │
│      └──────────→ 电量                    │
│       0  200  400  600 MWh              │
│                                          │
│  边际出清价格：0.355元/kWh                │
│  预出清电量：450 MWh                      │
│                                          │
│  你的成交结果：                            │
│  成交电量：450 MWh                        │
│  成交价格：0.355元/kWh（统一出清价）      │
│  预计收益：159,750元                      │
└──────────────────────────────────────────┘
```

**模拟器特点**：

- **动态曲线**：每次调整报价，曲线实时重绘

- **分步演示**：点击"开始出清"后，曲线动画生成，交点高亮，出清价格闪烁

- **多场景**：预设5个典型场景（正常交叉、购方报价始终大于售方、购方报价始终小于售方等）

- **自由模式**：玩家可自定义所有参数，观察不同报价策略的结果

**配套计算题（3题）**：

- 计算题 3题 → [题库ID: L3-2-CALC-001 ~ 003]

**通关标准**：

- 模拟器完成5个场景的出清

- 计算题答对 ≥ 2题

- 理解边际电价法原理（问答题）

---

#### 3-3 集中竞价（报价撮合法）

**学习目标**：

- 掌握报价撮合法的配对规则

- 理解价差对系数k的作用

**知识点**：

- 第二十一条（二）报价撮合法规则

- 出清序列：售方从低到高、购方从高到低

- 成交价格计算：PD = P购 - k×(P购 - P售)，PS = P售 + (1-k)×(P购 - P售)

- k系数暂按0.5执行

**模拟器：报价撮合出清模拟器**

**界面设计**：

```plaintext
┌──────────────────────────────────────────┐
│  报价撮合法模拟器                          │
├──────────────────────────────────────────┤
│  【申报列表】                              │
│  售方申报：                                │
│  1. 0.30元/kWh  100MWh  [企业A]          │
│  2. 0.32元/kWh  150MWh  [企业B]          │
│  3. 0.34元/kWh  200MWh  [企业C]          │
│                                          │
│  购方申报：                                │
│  1. 0.38元/kWh  180MWh  [用户X]          │
│  2. 0.36元/kWh  200MWh  [用户Y]          │
│  3. 0.33元/kWh  120MWh  [用户Z]          │
├──────────────────────────────────────────┤
│  [开始撮合]                                │
├──────────────────────────────────────────┤
│  【撮合过程动画】                           │
│  第1轮：                                   │
│  售方A(0.30元) ←→ 购方X(0.38元)          │
│  价差：0.08元  k=0.5                      │
│  成交价格：                                │
│    购方X支付：0.34元/kWh                  │
│    售方A收到：0.34元/kWh                  │
│  成交电量：100MWh（售方A全部成交）         │
│  ✓ 成交记录：A→X 100MWh @ 0.34元         │
│                                          │
│  第2轮：                                   │
│  售方B(0.32元) ←→ 购方X剩余(0.38元)      │
│  成交电量：80MWh（购方X剩余80MWh全部成交） │
│  ...                                     │
└──────────────────────────────────────────┘
```

**玩法**：

- 玩家作为市场参与者之一，提交自己的报价

- 观看系统自动撮合过程（动画逐轮展示）

- 查看自己的成交结果和收益

**通关标准**：

- 完成3次撮合模拟

- 至少1次成交

- 理解k系数对成交价格的影响（问答题）

---

#### 3-4 挂牌交易

**学习目标**：

- 区分单向挂牌和双向挂牌

- 掌握挂牌交易的操作流程

**知识点**：

- 第二十二条：挂牌交易（购电方或售电方发布要约，另一方摘牌）

- 单向挂牌：一方挂牌，另一方摘牌，成交价为挂牌价

- 双向挂牌：双方随时挂牌和摘牌，电量摘完即止

**模拟器：电力拍卖行模拟器**

**界面设计**：

```plaintext
┌──────────────────────────────────────────┐
│  ⚡ 江西电力拍卖行                          │
│  模式：[ 单向挂牌 ] [ 双向挂牌 ]          │
├──────────────────────────────────────────┤
│  【当前挂牌列表】                           │
│  ┌─────────────────────────┐            │
│  │ 🔥热门 [售方挂牌]          │            │
│  │ 价格：0.32元/kWh           │            │
│  │ 电量：200 MWh              │            │
│  │ 挂牌人：某风电企业         │            │
│  │ 倒计时：⏰ 28秒            │            │
│  │ [立即摘牌]                 │            │
│  └─────────────────────────┘            │
│                                          │
│  ┌─────────────────────────┐            │
│  │ [购方挂牌]                 │            │
│  │ 价格：0.38元/kWh           │            │
│  │ 电量：150 MWh              │            │
│  │ 挂牌人：某钢铁厂           │            │
│  │ 倒计时：⏰ 15秒            │            │
│  │ [立即摘牌]                 │            │
│  └─────────────────────────┘            │
├──────────────────────────────────────────┤
│  【我要挂牌】                              │
│  类型：[ 卖电 ] [ 买电 ]                  │
│  价格：[______] 元/kWh                    │
│  电量：[______] MWh                       │
│  挂牌时长：[ 30秒 ] [ 60秒 ] [ 自定义 ]   │
│  [提交挂牌]                                │
└──────────────────────────────────────────┘
```

**游戏机制**：

- **倒计时**：挂牌后30秒内无人摘牌，自动失效

- **抢购**：热门低价挂牌会被AI快速摘牌，考验玩家反应速度

- **策略选择**：

  - 激进策略：低价快速成交

  - 保守策略：高价等待买家

- **排行榜**：显示当日成交量最多的玩家

**通关标准**：

- 成功挂牌并成交至少2次

- 成功摘牌至少1次

- 总收益 > 0

---

#### 3-5 集中撮合交易

**学习目标**：

- 理解集中撮合的"价格优先"原则

- 掌握15分钟申报区间的出清机制

**知识点**：

- 第二十三条：集中撮合交易（15分钟申报区间，价格优先出清）

- 购售双方多次自由申报电量包

- 每15分钟出清一次

**模拟器：集中撮合交易大厅**

**界面设计**：

```plaintext
┌──────────────────────────────────────────┐
│  集中撮合交易大厅                          │
│  当前申报区间：14:00-14:15 剩余：08:32    │
├──────────────────────────────────────────┤
│  【申报池】                                │
│  售方申报（价格从低到高）：                 │
│  1. 0.31元  80MWh   [企业A]  14:03       │
│  2. 0.33元  120MWh  [企业B]  14:05       │
│  3. 0.33元  100MWh  [你]     14:08 🟡    │
│  ...                                     │
│                                          │
│  购方申报（价格从高到低）：                 │
│  1. 0.37元  150MWh  [用户X]  14:02       │
│  2. 0.35元  180MWh  [用户Y]  14:06       │
│  ...                                     │
├──────────────────────────────────────────┤
│  【我的申报】                              │
│  价格：[_____] 元/kWh                     │
│  电量：[_____] MWh                        │
│  [提交申报] [撤销上一笔]                   │
├──────────────────────────────────────────┤
│  【出清倒计时】⏰ 06:32                    │
│  预计出清价格：~0.34元/kWh                │
└──────────────────────────────────────────┘
```

**15分钟后自动出清**：

- 系统按报价撮合法出清

- 显示成交结果动画

- 玩家查看自己的成交情况

**通关标准**：

- 参与至少2个申报区间

- 至少1次成交

- 理解价格优先原则

---

#### 3-6 滚动撮合交易

**学习目标**：

- 掌握"时间优先、价格优先"的实时撮合原则

- 培养快速决策能力

**知识点**：

- 第二十四条：滚动撮合交易（实时申报、实时出清）

- 购电价大于售电价即可匹配

- 成交价格为先挂牌方的价格（挂牌价）

**模拟器**：已在前面创建的"江西电力市场滚动撮合交易模拟器"

**关卡目标**：

- 在5分钟内通过买卖电力赚取利润

- 目标收益：≥ 50,000元

**评分标准**：

| 总收益 | 成交次数 | 评级 |
| --- | --- | --- |
| ≥ 100,000元 | ≥ 10次 | S（传奇交易员） |
| ≥ 50,000元 | ≥ 5次 | A（资深交易员） |
| ≥ 20,000元 | ≥ 3次 | B（合格交易员） |
| ≥ 0元 | ≥ 1次 | C（新手交易员） |
| < 0元 | - | F（需加强学习） |

**通关标准**：

- 评级 ≥ B

- 理解滚动撮合的即时性优势

---

### 第4关：价格与电量约束篇

**关卡概述**：本关聚焦市场交易的约束条件，包括时段划分、价格限制、电量计算等，这些是实际交易中的"红线"。

---

#### 4-1 时段划分原则

**学习目标**：

- 理解48时段的划分方式（每天24小时×2）

- 掌握峰、谷、平、尖峰、深谷时段的分类

**知识点**：

- 第三十一条：交易时段划分原则（参照江西省分时电价机制）

- 第三十二条：不同时段的典型曲线（新能源、居民农业、市场化用户）

**题型设计**：

- 单选题 3题 → [题库ID: L4-1-SC-001 ~ 003]

- 时段识别题 1题 → [题库ID: L4-1-ID-001]

- 可视化题 1题 → [题库ID: L4-1-VIS-001]

**通关标准**：答对率 ≥ 80%

---

#### 4-2 价格上下限约束

**学习目标**：

- 掌握不同交易类型的价格限制

- 理解价格上下限的调整机制

**知识点**：

- 第三十三至三十五条：年度交易不限价、"D-2"日交易与现货市场价格上限一致、月度交易各时段价格上限

- 平段0.497160元/kWh，谷段0.198864元/kWh，深谷0.149148元/kWh，高峰0.795456元/kWh，尖峰0.894888元/kWh

**题型设计**：

- 判断题 5题 → [题库ID: L4-2-TF-001 ~ 005]

- 计算题 2题 → [题库ID: L4-2-CALC-001 ~ 002]

**通关标准**：答对率 ≥ 75%

---

#### 4-3 年度电量约束计算

**学习目标**：

- 掌握燃煤发电企业年度交易净合同量上限公式

- 理解新能源发电企业电量约束的计算方法

**知识点**：

- 第三十七至三十八条：燃煤发电企业公式 = 机组可用发电能力×厂用电率×K1

- 新能源发电企业公式 = 额定装机容量×(1-机制电量比例)×同类型机组最大发电可利用小时数

**模拟器：年度电量约束计算器**

**界面设计**：

```plaintext
┌──────────────────────────────────────────┐
│  年度电量约束计算器                        │
├──────────────────────────────────────────┤
│  机组类型：[ 燃煤机组 ] [ 新能源机组 ]    │
├──────────────────────────────────────────┤
│  【燃煤机组参数输入】                       │
│  机组容量：[_____] MW                     │
│  年运行小时：[_____] h                    │
│  厂用电率：[_____] %                      │
│  K1系数：[1.0]（暂定）                    │
├──────────────────────────────────────────┤
│  [计算]                                   │
├──────────────────────────────────────────┤
│  【计算过程】                              │
│  1. 可用发电能力 = 300MW × 5500h          │
│     = 1,650,000 MWh                      │
│                                          │
│  2. 扣除厂用电 = 1,650,000 × (1-5%)      │
│     = 1,567,500 MWh                      │
│                                          │
│  3. 年度净合同上限 = 1,567,500 × 1.0     │
│     = 1,567,500 MWh                      │
├──────────────────────────────────────────┤
│  【结果】                                  │
│  年度交易净合同量上限：1,567,500 MWh      │
│  建议签约比例：70%-85%                    │
│  推荐签约电量：1,097,250 - 1,332,375 MWh │
└──────────────────────────────────────────┘
```

**模拟器特点**：

- 可拖动滑块调整参数

- 实时显示计算过程

- 给出签约建议

**配套计算题（3题）**：

- 计算题 3题 → [题库ID: L4-3-CALC-001 ~ 003]

**通关标准**：

- 模拟器完成3次计算

- 计算题答对 ≥ 2题

---

#### 4-4 月度电量约束计算

**学习目标**：

- 掌握月度可交易电量的计算方法

- 理解已签合同对可交易电量的影响

**知识点**：

- 月度可交易电量 = 机组可用发电能力 - 已签订年度及多月合同电量 - 年度及多月合同偏差考核电量

**计算题（3题）**：

- 计算题 3题 → [题库ID: L4-4-CALC-001 ~ 003]

**通关标准**：答对率 ≥ 80%

---

### 第5关：绿色电力交易篇

**关卡概述**：学习绿色电力交易的特殊机制，理解绿电的环境价值与绿证管理。

---

#### 5-1 绿电交易特点

**学习目标**：

- 理解绿电交易与普通电能量交易的区别

- 掌握绿电交易的标的物构成

**知识点**：

- 绿电交易标的物 = 48时段电能量 + 绿色电力环境价值

- 参与主体：新能源企业、售电公司、电力用户

**题型设计**：

- 单选题 5题 → [题库ID: L5-1-SC-001 ~ 005]

- 对比题 1题 → [题库ID: L5-1-COMP-001]

**通关标准**：答对率 ≥ 80%

---

#### 5-2 绿电交易流程

**学习目标**：

- 掌握绿电交易的完整流程

- 理解绿电交易的申报与结算

**知识点**：

- 月度绿电双边协商、"D-2"日绿电双向挂牌

- 绿电交易价格 = 电能量价格 + 环境价值价格

**流程图题（1题）**：

- 流程图题 1题 → [题库ID: L5-2-FLOW-001]

**通关标准**：流程题正确 + 理解绿电价格构成

---

#### 5-3 绿证核发与认领

**学习目标**：

- 了解绿证的作用与管理

- 掌握绿证核发与认领流程

**知识点**：

- 绿证 = 绿色电力环境价值的电子凭证

- 核发：新能源企业按实际发电量申请

- 认领：购电方在交易后认领对应绿证

**题型设计**：

- 单选题 3题 → [题库ID: L5-3-SC-001 ~ 003]

**通关标准**：答对率 ≥ 75%

---

### 第6关：结算与偏差处理篇

**关卡概述**：学习电费结算流程、偏差电量处理机制及费用分摊计算，这是交易落地的关键环节。

---

#### 6-1 电费结算流程

**学习目标**：

- 理解电费结算的完整流程

- 掌握结算周期与结算主体

**知识点**：

- 结算周期：月度结算

- 结算主体：电网企业、电力交易机构

- 结算内容：电能量费用、输配电费、政府性基金及附加、辅助服务费等

**流程图题（1题）**：

- 流程图题 1题 → [题库ID: L6-1-FLOW-001]

**通关标准**：流程图正确 + 理解结算周期

---

#### 6-2 偏差电量处理

**学习目标**：

- 理解偏差电量的定义与产生原因

- 掌握偏差电量的处理规则

**知识点**：

- 偏差电量 = 实际电量 - 合同电量

- 偏差处理：按现货市场价格结算

**模拟器：偏差电费计算器**

**界面设计**：

```plaintext
┌──────────────────────────────────────────┐
│  偏差电费计算器                            │
├──────────────────────────────────────────┤
│  【输入参数】                              │
│  中长期合同电量：[1000] MWh               │
│  中长期合同价格：[0.35] 元/kWh            │
│  实际发电量：[1100] MWh                   │
│  现货市场价格：[0.40] 元/kWh              │
├──────────────────────────────────────────┤
│  [计算]                                   │
├──────────────────────────────────────────┤
│  【计算过程】                              │
│  1. 偏差电量 = 1100 - 1000 = 100 MWh     │
│     （正偏差，多发电）                     │
│                                          │
│  2. 合同电费 = 1000 × 0.35 = 350,000元   │
│                                          │
│  3. 偏差电费 = 100 × 0.40 = 40,000元     │
│                                          │
│  4. 总收入 = 350,000 + 40,000             │
│     = 390,000元                          │
├──────────────────────────────────────────┤
│  【结果】                                  │
│  偏差类型：正偏差（多发）                  │
│  偏差电量：100 MWh                        │
│  偏差电费：+40,000元（额外收入）          │
│  总收入：390,000元                        │
│                                          │
│  💡提示：现货价格高于合同价格，正偏差     │
│  对发电企业有利！                          │
└──────────────────────────────────────────┘
```

**配套计算题（3题）**：

- 计算题 3题 → [题库ID: L6-2-CALC-001 ~ 003]

**通关标准**：

- 模拟器完成5次计算

- 计算题答对 ≥ 2题

---

#### 6-3 费用分摊计算

**学习目标**：

- 理解输配电费、系统运行费等的分摊方式

- 掌握政府性基金及附加的计算

**知识点**：

- 输配电费：按电压等级和电量收取

- 系统运行费：辅助服务费用分摊

- 政府性基金及附加：按用电量收取

**计算题（3题）**：

- 计算题 3题 → [题库ID: L6-3-CALC-001 ~ 003]

**通关标准**：答对率 ≥ 80%

---

### 第7关：综合实战篇

**关卡概述**：最终挑战关卡，综合运用所学知识，完成复杂的交易场景模拟，培养实战能力。

---

#### 7-1 发电企业经营模拟

**学习目标**：

- 综合运用年度、月度、日前交易策略

- 体验发电企业全流程经营决策

**模拟器：发电企业经营模拟器（大型）**

**场景设定**：

- 玩家角色：300MW燃煤电厂交易经理

- 模拟时间：1年（加速为30分钟）

- 经营目标：最大化年度收入，同时控制偏差风险

**游戏流程**：

**第一阶段：年度交易（1月）**

- 任务：根据预测年度可用发电能力，决定年度合同签约比例（60%-90%）

- 决策点：

  - 签约比例（影响风险与收益）

  - 合同价格（与AI售电公司谈判）

- 评分：签约比例合理性、价格谈判能力

**第二阶段：月度调整（2-12月，每月一次）**

- 任务：根据检修计划、市场行情，调整月度合同

- 决策点：

  - 是否参与月度集中竞价

  - 是否在滚动撮合中回购/转让合同

- 随机事件：

  - 设备故障（被迫检修，需回购合同）

  - 煤价波动（影响报价策略）

  - 极端天气（影响新能源出力，市场价格上涨）

**第三阶段：日前交易（模拟100天，加速）**

- 任务：每天参与"D-2"日交易，微调合同

- 决策点：实时市场价格与合同价格对比，决定是否调整

- 考核：响应速度、决策准确性

**第四阶段：实时执行与偏差处理（持续）**

- 模拟发电过程，显示实际出力曲线

- 随机事件：负荷波动、设备跳闸

- 计算每月偏差电量与偏差电费

**第五阶段：年度结算**

- 显示全年经营数据：

  - 总收入（合同电费+偏差电费）

  - 总成本（燃料成本+运维成本）

  - 净利润

  - 偏差率（偏差电量/合同电量）

- 评级：S/A/B/C/D

**评分维度**：

| 维度 | 权重 | 说明 |
| --- | --- | --- |
| 总收入 | 40% | 年度总收入越高越好 |
| 偏差率 | 30% | 偏差率<5%为优秀 |
| 决策速度 | 15% | 交易响应时间 |
| 风险控制 | 15% | 是否遭遇重大损失 |

**通关标准**：

- 评级 ≥ B

- 偏差率 < 10%

- 净利润 > 0

---

#### 7-2 售电公司套利实战

**学习目标**：

- 掌握售电公司的买卖价差套利策略

- 理解批发市场与零售市场的联动

**模拟器：售电公司套利模拟器**

**场景设定**：

- 玩家角色：某售电公司交易员

- 代理用户：50家工业企业，月用电量共10,000 MWh

- 任务：在批发市场低价购电，向零售用户高价售电，赚取价差

**游戏流程**：

**第一步：签约零售用户**

- 与用户协商零售价格（固定价格或浮动价格套餐）

- 用户有自己的期望价格，谈判技巧影响成交

**第二步：批发市场购电**

- 参与年度、月度、"D-2"日交易

- 策略：低价时段大量购入，高价时段减少购入

- 风险：如果购电量不足，需在现货市场补电（价格更高）

**第三步：实时平衡**

- 用户实际用电量可能与预测偏差

- 需在日前市场及时调整购电量

**第四步：月度结算**

- 计算收入：零售电费收入

- 计算成本：批发市场购电成本+输配电费+偏差电费

- 计算利润

**挑战关卡**：

- 关卡1：平稳市场（价格波动小，易操作）

- 关卡2：波动市场（价格剧烈波动，考验判断力）

- 关卡3：极端市场（出现价格暴涨，风险极高）

**通关标准**：

- 连续3个月盈利

- 月均利润 ≥ 50,000元

- 用户满意度 ≥ 80%

---

#### 7-3 用户购电策略

**学习目标**：

- 掌握电力用户的购电策略优化

- 理解峰谷电价套利与需求响应

**模拟器：用户购电优化器**

**场景设定**：

- 玩家角色：某钢铁厂能源管理员

- 月用电量：5,000 MWh

- 目标：在保障生产的前提下，最小化电费

**游戏流程**：

**第一步：选择购电方式**

- 直接参与批发市场

- 选择售电公司代理（比较不同售电公司的套餐）

**第二步：制定用电计划**

- 根据生产计划，预测各时段用电量

- 优化策略：尽量在低价时段（谷段、深谷）用电

- 约束：某些生产工序不可中断

**第三步：参与需求响应**

- 高峰时段减少用电，获得补贴

- 平衡生产与经济性

**第四步：月度结算**

- 计算总电费：电能量费用+输配电费+政府性基金

- 对比优化前后的节省金额

**关卡设计**：

- 关卡1：基础优化（仅调整用电时段）

- 关卡2：进阶优化（参与需求响应）

- 关卡3：专家优化（结合储能系统，峰谷套利）

**通关标准**：

- 相比优化前节省电费 ≥ 10%

- 生产计划满足率 ≥ 95%

---

#### 7-4 综合场景挑战

**学习目标**：

- 应对复杂的市场突发事件

- 综合运用所有知识点

**模拟器：综合场景挑战器**

**关卡设计**：

**Boss关卡1：极端天气应对**

- 背景：台风来袭，预测新能源出力大幅下降，现货价格暴涨

- 玩家角色：发电企业/售电公司/用户（随机分配）

- 任务：根据角色制定应对策略

  - 发电企业：是否提高报价？是否申请不可抗力？

  - 售电公司：是否紧急购电？是否提醒用户减少用电?

  - 用户：是否参与需求响应？是否调整生产计划？

- 评分：损失控制、决策速度

**Boss关卡2：政策调整应对**

- 背景：突然宣布调整电价上下限政策

- 任务：快速理解新政策，调整交易策略

- 考核：政策理解准确性、策略调整合理性

**Boss关卡3：市场操纵识别**

- 背景：发现市场中有异常报价行为，疑似市场操纵

- 任务：识别异常，向监管机构举报，或避开风险

- 考核：风险识别能力

**通关标准**：

- 完成至少2个Boss关卡

- 每关评分 ≥ 70分

- 解锁"江西电力市场专家"终极称号

---

## 八、模拟器技术规格表

| 编号 | 模拟器名称 | 对应关卡 | 技术难度 | 开发优先级 | 交互方式 | 核心功能 | 预估开发时间 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | 主体身份识别器 | 1-1 | ⭐ 简单 | P1 | 拖拽卡牌 | 分类匹配 | 3天 |
| 2 | 注册流程闯关器 | 1-3 | ⭐⭐ 中等 | P1 | 关卡通关 | 流程模拟 | 5天 |
| 3 | 交易单元配对游戏 | 2-3 | ⭐ 简单 | P2 | 拖拽配对 | 匹配验证 | 2天 |
| 4 | 双边协商谈判模拟器 | 3-1 | ⭐⭐ 中等 | P1 | AI对话 | 谈判博弈 | 4天 |
| 5 | 供需曲线可视化模拟器 | 3-2 | ⭐⭐⭐ 复杂 | P0 | 曲线绘制 | 边际电价计算 | 7天 |
| 6 | 报价撮合出清模拟器 | 3-3 | ⭐⭐⭐ 复杂 | P1 | 动画演示 | 撮合算法 | 6天 |
| 7 | 电力拍卖行模拟器 | 3-4 | ⭐⭐ 中等 | P1 | 挂牌摘牌 | 倒计时竞拍 | 4天 |
| 8 | 集中撮合交易大厅 | 3-5 | ⭐⭐ 中等 | P2 | 实时申报 | 定时出清 | 5天 |
| 9 | 滚动撮合交易模拟器 | 3-6 | ⭐⭐⭐ 复杂 | P0 | 实时交易 | 即时撮合 | **已完成** |
| 10 | 年度电量约束计算器 | 4-3 | ⭐ 简单 | P1 | 表单计算 | 公式计算 | 2天 |
| 11 | 峰谷电价优化器 | 4-1 | ⭐⭐ 中等 | P2 | 滑块调整 | 优化算法 | 4天 |
| 12 | 偏差电费计算器 | 6-2 | ⭐ 简单 | P1 | 表单计算 | 偏差计算 | 2天 |
| 13 | 发电企业经营模拟器 | 7-1 | ⭐⭐⭐⭐ 很复杂 | P0 | 经营管理 | 全流程模拟 | 15天 |
| 14 | 售电公司套利模拟器 | 7-2 | ⭐⭐⭐ 复杂 | P1 | 套利策略 | 批发零售联动 | 10天 |
| 15 | 用户购电优化器 | 7-3 | ⭐⭐ 中等 | P1 | 策略优化 | 用电计划优化 | 6天 |
| 16 | 综合场景挑战器 | 7-4 | ⭐⭐⭐⭐ 很复杂 | P2 | 场景应对 | 突发事件处理 | 12天 |

**开发优先级说明**：

- P0：核心模拟器，MVP版本必须包含

- P1：重要模拟器，完整版本包含

- P2：增强模拟器，优化版本包含

**总预估开发时间**：

- MVP版本（P0模拟器）：约1个月

- 完整版本（P0+P1）：约3个月

- 优化版本（全部）：约4-5个月

---

## 九、题库设计规范

### 9.1 题型分类标准

| 题型 | 适用场景 | 评分方式 | 示例 |
| --- | --- | --- | --- |
| 单选题 | 概念理解、规则记忆 | 1题1分 | "中长期交易的标的物是？" |
| 多选题 | 综合知识、多重条件 | 全对得分，漏选少选不得分 | "发电企业的权利包括？" |
| 判断题 | 快速检验、常见误区 | 1题0.5分 | "年度交易必须限价" |
| 填空题 | 关键数值、公式记忆 | 1空1分 | "最小合同周期为___" |
| 计算题 | 公式应用、数值计算 | 步骤分+结果分 | "计算年度电量约束" |
| 案例分析题 | 综合应用、情景判断 | 按问题分段评分 | "某企业遇到XX情况，应如何处理？" |
| 排序题 | 流程记忆、逻辑顺序 | 全对得分 | "将市场注册流程排序" |
| 匹配题 | 对应关系、分类理解 | 每对1分 | "职责与主体连线" |

### 9.2 难度分级标准

| 难度级别 | 定义 | 占比建议 |

| 难度级别 | 定义 | 占比建议 | 特征 |
| --- | --- | --- | --- |
| ⭐ 入门 | 直接考查规则原文 | 30% | 单一知识点，直接记忆 |
| ⭐⭐ 基础 | 需要理解规则含义 | 40% | 需要转换语言表述，但逻辑简单 |
| ⭐⭐⭐ 进阶 | 需要应用规则解决问题 | 20% | 涉及计算、推理、多步骤 |
| ⭐⭐⭐⭐ 专家 | 需要综合多个知识点 | 10% | 复杂场景、多重约束、策略选择 |

### 9.3 题目编写模板

**单选题模板**：

```plaintext
题目编号：L1-S1-Q01
题型：单选题
难度：⭐⭐ 基础
关卡：第1关 市场准入篇
小节：1-1 经营主体类型识别

题干：
下列哪项不是经营主体应具备的基本条件？

选项：
A. 财务独立核算
B. 能够独立承担民事责任
C. 拥有国有资产
D. 提供有效身份证明

正确答案：C

解析：
根据《江西省电力市场注册实施细则》第五条，经营主体应是财务独立核算、能够独立承担民事责任的民事主体，不要求必须拥有国有资产。国有企业、民营企业、外资企业等均可参与市场。

关联规则：
- 江西省电力市场注册实施细则 第五条

知识点标签：
#经营主体定义 #基本条件 #市场准入

出题人：XXX
审核人：XXX
创建时间：2026-01-16
```

### 9.4 每关题目数量分配表

| 关卡 | 单选题 | 多选题 | 判断题 | 填空题 | 计算题 | 案例分析题 | 排序/匹配题 | 总计 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 第1关 | 10 | 3 | 5 | 2 | 0 | 3 | 2 | 25 |
| 第2关 | 12 | 5 | 8 | 3 | 0 | 2 | 0 | 30 |
| 第3关 | 8 | 2 | 5 | 0 | 3 | 2 | 0 | 20 |
| 第4关 | 10 | 3 | 5 | 2 | 5 | 0 | 0 | 25 |
| 第5关 | 8 | 3 | 6 | 2 | 0 | 1 | 0 | 20 |
| 第6关 | 10 | 2 | 5 | 0 | 6 | 2 | 0 | 25 |
| 第7关 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0（纯模拟器） |

**总题目数**：145题

---

## 十、积分与成就系统

### 10.1 积分获取规则

| 行为 | 积分奖励 | 说明 |
| --- | --- | --- |
| 答对1道入门题 | +5分 | 基础积分 |
| 答对1道基础题 | +10分 | 正常积分 |
| 答对1道进阶题 | +20分 | 高级积分 |
| 答对1道专家题 | +50分 | 稀有积分 |
| 模拟器完成（S评级） | +100分 | 完美表现 |
| 模拟器完成（A评级） | +60分 | 优秀表现 |
| 连续答对5题 | +50分（连击奖励） | 连胜加成 |
| 首次通关某小节 | +30分 | 首通奖励 |
| 三星通关某小节 | +50分 | 完美通关 |
| 完成每日挑战 | +100分 | 日常激励 |

### 10.2 星级评价标准

**小节星级**：

- ⭐⭐⭐ 三星：答题正确率 ≥ 95%，模拟器评级S，用时 < 标准时间

- ⭐⭐ 二星：答题正确率 ≥ 80%，模拟器评级A，用时 < 标准时间×1.5

- ⭐ 一星：答题正确率 ≥ 60%，模拟器评级B

**关卡星级**：

- 关卡总星数 = 所有小节星数之和

- 最高星数 = 小节数 × 3

- 示例：第1关包含4个小节，最高12星

### 10.3 成就徽章设计

| 编号 | 徽章名称 | 获取条件 | 图标设计建议 | 稀有度 |
| --- | --- | --- | --- | --- |
| 1 | 市场新人 | 完成第1关 | 🎓 毕业帽 | 普通 |
| 2 | 交易学徒 | 累计积分达到1000分 | 📚 书本 | 普通 |
| 3 | 合格交易员 | 通过第3关（交易方式篇） | 💼 公文包 | 普通 |
| 4 | 计算大师 | 所有计算题全对 | 🧮 算盘 | 稀有 |
| 5 | 速通达人 | 任意关卡用时排名前10% | ⚡ 闪电 | 稀有 |
| 6 | 完美主义者 | 任意小节获得三星评价 | ⭐ 星星 | 稀有 |
| 7 | 连胜王者 | 连续答对20题 | 🔥 火焰 | 稀有 |
| 8 | 模拟大师 | 完成所有模拟器并获A级以上 | 🎮 游戏手柄 | 史诗 |
| 9 | 套利专家 | 售电公司模拟器盈利超10万元 | 💰 金币 | 史诗 |
| 10 | 风险控制者 | 发电企业模拟器偏差率<3% | 🛡️ 盾牌 | 史诗 |
| 11 | 全能战士 | 通过全部7关 | 🏆 奖杯 | 史诗 |
| 12 | 三星收集者 | 所有小节均获三星 | 💎 钻石 | 传说 |
| 13 | Boss终结者 | 通过所有Boss关卡 | 👑 王冠 | 传说 |
| 14 | 江西电力市场专家 | 获得S评级并通过第7关 | 🌟 耀眼之星 | 神话 |
| 15 | 知识探索者 | 首次查看规则速查功能 | 🔍 放大镜 | 普通 |
| 16 | 错题克星 | 错题本中的题目全部重做正确 | ✅ 对勾 | 稀有 |
| 17 | 日常挑战者 | 连续7天完成每日挑战 | 📅 日历 | 稀有 |
| 18 | 社交达人 | 分享成绩到社交媒体 | 📢 喇叭 | 普通 |
| 19 | 数据分析师 | 查看个人数据统计页面 | 📊 图表 | 普通 |
| 20 | 传奇交易员 | 总积分达到10000分 | 🏅 勋章 | 传说 |

### 10.4 排行榜机制

**排行榜类型**：

1. **总积分排行榜**

   - 显示全服前100名玩家

   - 每日更新

   - 奖励：前10名获得专属称号

2. **关卡速通榜**

   - 每个关卡独立排名

   - 按通关时间排序

   - 奖励：最快记录保持者获得"闪电"图标

3. **模拟器收益榜**

   - 发电企业模拟器年度收入排名

   - 售电公司模拟器月利润排名

   - 奖励：前3名获得"投资之神"称号

4. **周榜/月榜**

   - 周活跃度排名

   - 月度进步最快排名

   - 奖励：周冠军/月冠军头衔

**排行榜展示**：

```plaintext
┌─────────────────────────────────┐
│  🏆 总积分排行榜                 │
├─────────────────────────────────┤
│  排名  昵称         积分   称号  │
│  🥇 1  张三      15,320  传奇   │
│  🥈 2  李四      12,890  大师   │
│  🥉 3  王五      11,560  专家   │
│  4    赵六       9,870  资深   │
│  5    孙七       8,650  熟练   │
│  ...                            │
│  56   你        3,420  学徒    │
│                                 │
│  [查看我的排名]  [刷新]          │
└─────────────────────────────────┘
```

---

## 十一、实施路线图

### 11.1 MVP版本（1-2个月）

**目标**：快速验证核心玩法，收集用户反馈

**包含内容**：

**关卡**（3关）：

- ✅ 第1关：市场准入篇（完整）

- ✅ 第3关：交易方式篇（仅3-2、3-6两个小节）

- ✅ 第7关：综合实战篇（仅7-1发电企业模拟器）

**模拟器**（5个）：

1. 主体身份识别器（1-1）

2. 供需曲线可视化模拟器（3-2）- P0

3. 滚动撮合交易模拟器（3-6）- P0，已完成

4. 年度电量约束计算器（4-3）

5. 发电企业经营模拟器（7-1）- P0

**题库**：约80题（覆盖MVP关卡）

**核心功能**：

- 用户注册/登录

- 关卡解锁系统

- 积分与成就系统（简化版）

- 进度保存（LocalStorage）

- 基础数据统计

**技术实现**：

- 前端：React + TypeScript

- 状态管理：Zustand

- 样式：Tailwind CSS

- 部署：Vercel（静态托管）

**时间安排**：

- Week 1-2：需求细化、UI设计、技术选型

- Week 3-4：搭建框架、开发基础组件

- Week 5-6：开发5个模拟器（并行开发）

- Week 7：题库录入、关卡整合

- Week 8：测试、修复bug、部署上线

**验收标准**：

- 3个关卡全部可玩

- 5个模拟器功能完整

- 至少10位种子用户完成全部流程

- 收集用户反馈报告

---

### 11.2 完整版本（3-4个月，基于MVP）

**目标**：发布功能完备的产品，覆盖全部知识点

**新增内容**：

**关卡**（+4关）：

- ✅ 第2关：中长期交易基础篇

- ✅ 第4关：价格与电量约束篇

- ✅ 第5关：绿色电力交易篇

- ✅ 第6关：结算与偏差处理篇

- ✅ 第3关、第7关剩余小节

**模拟器**（+9个）：

- 注册流程闯关器（1-3）

- 交易单元配对游戏（2-3）

- 双边协商谈判模拟器（3-1）

- 报价撮合出清模拟器（3-3）

- 电力拍卖行模拟器（3-4）

- 集中撮合交易大厅（3-5）

- 偏差电费计算器（6-2）

- 售电公司套利模拟器（7-2）

- 用户购电优化器（7-3）

**题库**：145题（全部题目）

**新增功能**：

- 错题本系统

- 每日挑战模式

- 知识卡片库

- 规则速查功能

- 社交分享功能

- 个人数据统计页（学习时长、正确率曲线、强弱项分析）

**优化内容**：

- 动画效果增强

- 音效添加

- 响应式优化（移动端体验）

- 题库扩充（每小节至少10题备用）

**时间安排**：

- Week 9-10：第2、4、5、6关开发

- Week 11-13：9个新模拟器开发

- Week 14：题库扩充、功能集成

- Week 15：全量测试、性能优化

- Week 16：Beta测试、用户反馈、迭代优化

**验收标准**：

- 7关28小节全部可玩

- 14个模拟器（不含优化版本模拟器）

- 145道题目

- 用户平均通关时间 ≤ 8小时

- 用户满意度 ≥ 85%

---

### 11.3 优化版本（持续迭代）

**目标**：增强趣味性、社交性、智能化

**新增内容**：

**模拟器升级**：

- 峰谷电价优化器（4-1）

- 综合场景挑战器（7-4）

**AI对手系统**：

- 模拟器中的AI对手采用强化学习算法，根据玩家水平动态调整难度

- AI根据历史数据预测玩家策略，提供更真实的对抗

**多人模式**：

- 实时对战：2-4人同时参与滚动撮合交易，竞争利润排名

- 合作模式：组队完成综合实战关卡

- 公会系统：玩家可创建/加入公会，公会排行榜

**自适应学习路径**：

- 根据玩家答题情况，推荐薄弱知识点

- 智能题库：优先推送错题相关知识点的题目

- 个性化关卡推荐

**内容扩展**：

- 新增"跨省交易篇"（学习省间交易规则）

- 新增"辅助服务篇"（学习AGC、调峰等辅助服务）

- 新增"现货市场篇"（衔接现货交易知识）

**社区功能**：

- 论坛/讨论区

- 玩家攻略分享

- 规则解读文章

- 专家答疑

**数据分析**：

- 学习行为分析（热力图、学习路径）

- 知识点掌握度报告

- 学习效率分析

- 导出学习证书

**时间安排**：

- Month 5-6：AI对手系统开发

- Month 7-8：多人模式开发

- Month 9-10：自适应学习系统

- Month 11-12：内容扩展、社区功能

- 持续：根据用户反馈迭代优化

**验收标准**：

- AI对手胜率50%（动态调整）

- 多人模式月活跃用户 ≥ 1000人

- 自适应推荐准确率 ≥ 80%

- 用户留存率（7日）≥ 40%

---

## 十二、附录

### 12.1 江西电力市场规则文档关键条款索引

**市场注册相关**：

- 第五条：经营主体定义

- 第六条：发电企业基本条件

- 第七条：电力用户基本条件

- 第八条：售电公司管理

- 第十条：新型储能企业基本条件

- 第十一条：虚拟电厂基本条件

- 第十五条：市场注册流程

- 第二十八条：信息变更

- 第四十条：市场注销

**中长期交易相关**：

- 第十三条：交易品种

- 第十六条：交易周期

- 第二十条：双边协商交易

- 第二十一条：集中竞价交易（边际电价法、报价撮合法）

- 第二十二条：挂牌交易

- 第二十三条：集中撮合交易

- 第二十四条：滚动撮合交易

- 第二十五条：交易单元

- 第二十六条：交易单元与经营主体对应关系

**价格与电量约束相关**：

- 第三十一条：交易时段划分原则

- 第三十三至三十五条：价格上下限约束

- 第三十七条：年度电量约束计算公式

**绿色电力交易相关**：

- 第七章：绿色电力交易专章（详见规则文档第七章）

**结算与偏差处理相关**：

- 第八章：结算相关条款（详见规则文档第八章）

### 12.2 参考的蒙西游戏链接

- 蒙西电力市场交易规则闯关游戏：<https://deepseek.idoxu.com/xiaochu1235/mengxidianlishichangjiaoyiguizechuangguanyouxi_shoujishipeixiufuban_danwenjian.html>

**借鉴要点**：

- 闯关式学习路径

- 知识点与实操结合

- 案例与计算器工具

- 循序渐进的难度设计

### 12.3 技术栈建议

**前端框架**：

- React 18.x（最新稳定版）

- TypeScript 5.x（类型安全）

**状态管理**：

- Zustand（轻量级状态管理）

- 备选：Jotai、Valtio

**UI库与样式**：

- Tailwind CSS 3.x（实用优先的CSS框架）

- Headless UI（无样式组件库，与Tailwind完美配合）

- Framer Motion（动画库）

**图表与可视化**：

- Recharts（React图表库，用于供需曲线绘制）

- D3.js（备选，复杂可视化）

**路由**：

- React Router 6.x

**数据持久化**：

- LocalStorage（用户进度、设置）

- IndexedDB（题库、历史记录）

**构建工具**：

- Vite（快速的前端构建工具）

**代码质量**：

- ESLint（代码检查）

- Prettier（代码格式化）

- Husky（Git hooks）

**测试**：

- Vitest（单元测试）

- React Testing Library（组件测试）

- Playwright（E2E测试）

**部署**：

- Vercel（推荐，零配置部署）

- GitHub Pages（备选）

- Netlify（备选）

**版本控制**：

- Git + GitHub

**项目管理**：

- GitHub Issues（任务跟踪）

- GitHub Projects（看板管理）

---

## 总结

本文档详细规划了江西电力市场规则闯关游戏的完整关卡体系，包括：

- **7大关卡**，涵盖市场注册、中长期交易、价格约束、绿电交易、结算偏差、综合实战等核心知识点

- **28个小节**，每个小节设计明确的学习目标、题型、模拟器和通关标准

- **19个交互模拟器**，从简单的拖拽匹配到复杂的经营模拟，提供丰富的实战体验

- **145道题目**，多种题型结合，全面覆盖规则文档内容

- **完善的积分与成就系统**，激发学习动力

- **清晰的实施路线图**，分MVP、完整版、优化版三阶段推进

本规划文档可作为开发团队的蓝图，确保项目有序推进、高质量交付。