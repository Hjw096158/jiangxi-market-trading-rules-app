# 江西电力市场规则闯关游戏开发计划

## 一、项目概述
基于提供的完整关卡规划、题库和结算单样例集，开发一个Web-based的电力市场规则学习闯关游戏，采用游戏化学习方式帮助用户掌握江西电力市场交易规则。

## 二、已有资源整合

### 1. 关卡规划
- 7大关卡，28个小节
- 19个模拟器设计
- 游戏化元素设计

### 2. 题库资源
- 176道题目（单选、多选、判断、计算、案例）
- 完整的题目编号规则
- 难度分布（基础、进阶、高级）
- 关联模拟器设计

### 3. 结算单样例集
- 7种不同类型的结算单
- 详细的计算规则
- 结算单解读指南
- 术语对照表

## 三、技术栈实现

### 1. 基础框架搭建
- 使用React 18 + TypeScript初始化项目
- 集成Tailwind CSS进行样式开发
- 配置Zustand进行状态管理
- 安装Framer Motion实现动画效果
- 集成Recharts用于数据可视化

### 2. 项目结构设计
```plaintext
/src
  /components      # 通用组件（Button, Modal, ProgressBar等）
  /simulators      # 模拟器组件（19个模拟器）
  /levels          # 关卡数据（7大关卡，JSON格式）
  /store           # 状态管理（用户进度、游戏状态）
  /utils           # 工具函数（评分逻辑、数据生成）
  /assets          # 静态资源（图片、音频）
  /types           # TypeScript类型定义
  /data            # 数据文件（题库、结算单样例）
```

## 四、核心功能模块

### 1. 用户系统
- 用户注册/登录（本地存储）
- 进度保存与恢复
- 成就系统
- 排行榜功能

### 2. 关卡系统
- 7大关卡的导航与解锁机制
- 关卡内小节切换
- 题目答题与评分
- 模拟器交互与反馈

### 3. 题库系统
- 整合现有的176道题目
- 实现题目分类与筛选
- 支持错题本功能
- 提供详细的解析和关联模拟器

### 4. 模拟器开发
按照规划实现19个模拟器，重点包括：
- 市场准入类：主体身份识别器、注册流程闯关器
- 交易方式类：双边协商谈判模拟器、边际电价法模拟器、报价撮合出清模拟器等
- 结算类：结算单解读模拟器、偏差电费计算器
- 经营策略类：发电企业经营模拟器、售电公司套利模拟器等

### 5. 结算单学习模块
- 基于现有结算单样例开发互动学习模块
- 实现结算单找错模式
- 开发自主计算模式
- 提供详细的术语解释和计算规则

### 6. 游戏化元素
- 即时反馈系统（答对/答错提示）
- 星级评分机制
- 徽章成就系统
- 进度可视化
- 动画与音效

## 五、开发步骤

### 阶段一：项目初始化（1-2天）
- 搭建React + TypeScript + Tailwind项目
- 配置开发环境和构建工具
- 实现基础项目结构

### 阶段二：核心组件开发（3-4天）
- 开发通用UI组件
- 实现状态管理系统
- 开发用户进度保存功能

### 阶段三：题库与关卡系统（5-6天）
- 整合现有176道题目到数据库
- 实现题目答题功能
- 开发评分与反馈系统
- 实现关卡导航与解锁机制

### 阶段四：结算单学习模块（4-5天）
- 基于现有结算单样例开发互动学习模块
- 实现结算单找错模式
- 开发自主计算模式
- 提供详细的术语解释

### 阶段五：模拟器开发（15-20天）
- 逐个开发19个模拟器
- 实现模拟器交互逻辑
- 集成数据可视化
- 关联题库与模拟器

### 阶段六：游戏化元素与收尾（5-7天）
- 实现成就系统
- 开发排行榜功能
- 添加动画与音效
- 优化用户体验

### 阶段七：测试与部署（3-4天）
- 进行功能测试
- 优化性能
- 部署到Vercel或GitHub Pages

## 六、关键技术挑战与解决方案

### 1. 模拟器交互复杂性
- 采用组件化设计，复用核心组件（如报价面板、结果报告）
- 使用状态管理统一管理模拟器状态
- 分步实现复杂逻辑

### 2. 数据可视化需求
- 利用Recharts实现供需曲线、市场深度图等
- 采用动画效果增强可视化体验
- 确保图表响应式设计

### 3. 大量题目与结算单数据的管理
- 使用JSON格式存储题库和结算单数据
- 实现高效的数据检索和过滤
- 采用懒加载机制优化性能

### 4. 游戏化体验优化
- 设计合理的难度曲线
- 提供即时反馈
- 平衡学习与娱乐性

## 七、预期成果
- 完成7大关卡、28个小节、176道题目、19个模拟器
- 实现完整的结算单学习模块
- 实现完整的游戏化学习体验
- 支持PC和移动端访问
- 提供良好的用户体验和学习效果

## 八、后续迭代计划
- 定期更新关卡内容
- 添加新的模拟器类型
- 优化游戏平衡性
- 收集用户反馈并改进
- 考虑添加多人竞技模式

这个计划将确保充分利用已有资源，按照规划完整实现游戏，同时保持良好的代码质量和用户体验。